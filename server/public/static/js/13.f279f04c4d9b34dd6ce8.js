webpackJsonp([13],{1019:function(t,e,a){t.exports={default:a(1020),__esModule:!0}},1020:function(t,e,a){a(1023);var i=a(124).Object;t.exports=function(t,e,a){return i.defineProperty(t,e,a)}},1023:function(t,e,a){var i=a(165);i(i.S+i.F*!a(88),"Object",{defineProperty:a(89).f})},1034:function(t,e,a){"use strict";e.__esModule=!0;var i=a(1019),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(t,e,a){return e in t?(0,r.default)(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},1097:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=a(1034),o=a.n(r);e.default={components:{},data:function(){return{search_field:"",search_key:"",docs:[],page:1,limit:10,total:0,isAdd:!0,isAdmin:!1,dialogVisible:!1,answerVisible:!1,form:{iEditor:"",doc:"",docName:"",remarks:"",id:""},url:"/api/func/doc"}},created:function(){this.getData(),this.isAdmin=this.$route.query.isAdmin||!1},computed:{},filters:{getLocalDateStr:function(t){var e=function(t){for(var e=""+t;e.length<2;)e="0"+e;return e},a=new Date(t),i=a.getFullYear(),r=a.getMonth()+1,o=a.getDate(),n=a.getHours(),s=a.getMinutes();return i+"-"+e(r)+"-"+e(o)+" "+e(n)+":"+e(s)}},methods:(i={onUploadChange:function(t){var e=this,a=new FileReader;a.onload=function(t){e.form.doc=a.result},t.target.files[0]&&a.readAsDataURL(t.target.files[0]),this.form.docName=t.target.files[0].name},initForm:function(){var t=document.getElementById("fileInput");t&&t.value&&(t.value=""),this.form={iEditor:"",doc:"",docName:"",remarks:"",id:""},this.isAdd&&(this.form.iEditor=this.iEditor||"")},onAdd:function(){this.initForm(),this.isAdd=!0,this.showDialog()},onSearch:function(){},onClear:function(){},handleSizeChange:function(t){this.limit=t,this.getData()},handleCurrentChange:function(t){this.page=t,this.getData()}},o()(i,"onSearch",function(){return this.search_field?this.search_key?void this.getData():this.$message.error("未填写搜索词"):this.$message.error("未指定搜索字段")}),o()(i,"onClear",function(){this.search_field="",this.search_key="",this.page=1,this.getData()}),o()(i,"format",function(t){var e=t.split("\n"),a=[];return e.forEach(function(t){a.push("<p>"+t+"</p>")}),a.join("<br>")}),o()(i,"onEdit",function(t,e){this.isAdd=!1,this.form.id=e._id||"",this.form.iEditor=e.iEditor||"",this.form.doc=e.doc||"",this.form.docName=e.docName||"",this.form.remarks=e.remarks||"",this.form.iStatus=e.iStatus||0,this.form.iRemark=e.iRemark||[],this.showDialog()}),o()(i,"showDialog",function(){this.dialogVisible=!0}),o()(i,"showComfirm",function(){this.comfirmVisible=!0}),o()(i,"cancleDialog",function(){this.dialogVisible=!1,this.answerVisible=!1}),o()(i,"formatFile",function(t){t.forEach(function(t){t.doc&&(t.doc=t.doc.slice(0,10)+"...")})}),o()(i,"getData",function(){var t=this,e=this,a={offset:(e.page-1)*e.limit,limit:e.limit,sort_field:"iUpdateAt"};e.search_field&&(a.search_field=e.search_field),e.search_key&&(a.search_key=e.search_key),e.$axios.get(e.url,{params:a}).then(function(a){var i=a.data.data.docs||[];e.docs=i,t.formatFile(e.docs),e.total=a.data.data.total||0})}),o()(i,"onSubmit",function(){var t=this;return this.iEditor=this.form.iEditor,this.isAdd?this.form.doc?this.$axios.post(this.url,this.form).then(function(e){var a=e.data;if(a.errCode)return t.$message.error("提交失败: error "+a.errCode);t.dialogVisible=!1,t.$message.success("提交成功"),t.getData()}):this.$message.error("请上传文档"):this.$axios.post(this.url+"/"+this.form.id,this.form).then(function(e){var a=e.data;if(a.errCode)return t.$message.error("更新失败: error "+a.errCode);t.dialogVisible=!1,t.$message.success("更新成功"),t.getData()})}),o()(i,"delData",function(t){var e=this;e.$axios.post(e.url+"/"+t+"?_op=del").then(function(t){e.getData()})}),o()(i,"onDelete",function(t,e){var a=this;this.$confirm("确认删除该条目吗？一旦删除不可恢复！！！").then(function(t){a.delData(e._id)}).catch(function(t){})}),i)}},1124:function(t,e,a){e=t.exports=a(164)(!1),e.push([t.i,".el-alert[data-v-25e24ccc]{padding-top:0;padding-bottom:0}.entry-detail .el-form-item[data-v-25e24ccc]{margin-bottom:0}.entry-detail .el-form-item .el-form-item__label[data-v-25e24ccc]{font-weight:700}.handle-box[data-v-25e24ccc]{margin-bottom:20px}.handle-select[data-v-25e24ccc]{width:120px}.handle-input[data-v-25e24ccc]{width:300px;display:inline-block}#field1-input[data-v-25e24ccc]{display:inline;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#fff;background-image:none;border-radius:4px;border:1px solid #bfcbd9;box-sizing:border-box;color:#1f2d3d;font-size:inherit;height:36px;line-height:1;outline:0;padding:3px 10px;transition:border-color .2s cubic-bezier(.645,.045,.355,1);width:calc(100% - 65px)}[data-v-25e24ccc]::-webkit-input-placeholder{color:#97a8be}.da-rate[data-v-25e24ccc]{transform:translateY(8px)}#da-textarea[data-v-25e24ccc]{transform:translateY(10px)}.file-line[data-v-25e24ccc]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.da-img-box[data-v-25e24ccc]{width:203px;height:auto}",""])},1178:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-menu"}),t._v(" 功能")]),t._v(" "),a("el-breadcrumb-item",[t._v("文档录入")])],1)],1),t._v(" "),a("div",{staticClass:"handle-box"},[a("el-button",{staticClass:"handle-add mr10",attrs:{type:"success",icon:"plus"},on:{click:t.onAdd}},[t._v("添加")]),t._v(" "),a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"搜索字段"},model:{value:t.search_field,callback:function(e){t.search_field=e},expression:"search_field"}},[a("el-option",{key:"1",attrs:{label:"编辑人",value:"iEditor"}})],1),t._v(" "),a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"搜索关键词"},model:{value:t.search_key,callback:function(e){t.search_key=e},expression:"search_key"}}),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"search"},on:{click:t.onSearch}},[t._v("搜索")]),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"circle-close"},on:{click:t.onClear}},[t._v("重置")])],1),t._v(" "),a("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.docs,border:""},on:{"current-change":function(t){}}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"entry-detail",attrs:{"label-position":"left"}},[a("el-form-item",{attrs:{label:"编辑人："}},[a("div",{domProps:{innerHTML:t._s(e.row.iEditor)}})]),t._v(" "),a("el-form-item",{attrs:{label:"文档名："}},[a("div",[t._v(t._s(e.row.docName))])]),t._v(" "),a("el-form-item",{attrs:{label:"备注："}},[a("div",{domProps:{innerHTML:t._s(e.row.remarks)}})]),t._v(" "),a("el-form-item",{attrs:{label:"更新时间："}},[a("span",[t._v(t._s(t._f("getLocalDateStr")(e.row.iUpdateAt)))])])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{type:"index",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{prop:"iEditor",label:"编辑人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"docName",label:"文档名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"remarks",label:"备注"}}),t._v(" "),a("el-table-column",{attrs:{prop:"iUpdateAt",label:"更新时间",width:"240"}}),t._v(" "),a("el-table-column",{attrs:{prop:"iStatus",label:"状态",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){t.onEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){t.onDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,30,50,100,1e3],"page-size":t.limit,total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:t.isAdd?"添加":"编辑",visible:t.dialogVisible,close:"cancleDialog"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"编辑人"}},[a("el-input",{attrs:{placeholder:"请输入编辑人姓名"},model:{value:t.form.iEditor,callback:function(e){t.$set(t.form,"iEditor",e)},expression:"form.iEditor"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"文档"}},[a("input",{attrs:{type:"file",id:"fileInput"},on:{change:t.onUploadChange}})]),t._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{id:"da-textarea",type:"textarea",rows:3,placeholder:"请输入内容"},model:{value:t.form.remarks,callback:function(e){t.$set(t.form,"remarks",e)},expression:"form.remarks"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancleDialog}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("提 交")])],1)],1)],1)},staticRenderFns:[]}},1205:function(t,e,a){var i=a(1124);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(378)("147ce638",i,!0)},992:function(t,e,a){a(1205);var i=a(377)(a(1097),a(1178),"data-v-25e24ccc",null);t.exports=i.exports}});