webpackJsonp([9],{1007:function(e,t,a){a(1204);var l=a(377)(a(1112),a(1177),null,null);e.exports=l.exports},1017:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"ElTag",props:{text:String,closable:Boolean,type:String,hit:Boolean,closeTransition:Boolean,color:String},methods:{handleClose:function(e){this.$emit("close",e)}}}},1018:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{label:{},lableWidth:{},value:{},prop:{},type:{default:"image"}},data:function(){return{myLabel:this.label||"",myLabelWidth:this.lableWidth||"120px",url:"",name:""}},methods:{updateUrl:function(e){console.log(e),this.$emit("input",e)},onSuccess:function(e,t,a){return console.log("1111",e,t,a),e.errCode||!e.url?this.$message.error("上传失败 "+e.errMsg):(this.value=e.url,this.updateUrl(e.url),this.$message.success("上传成功"))},onCopy:function(e,t){console.log(t),this.$clipboard(t.url),this.$message.success(t.name+" 链接复制成功")}}}},1024:function(e,t,a){t=e.exports=a(164)(!1),t.push([e.i,".upload-demo{padding-left:10px;line-height:normal;vertical-align:middle;display:inline-block}.el-upload--text{border:none;width:auto;height:auto}",""])},1025:function(e,t,a){var l=a(377)(a(1017),a(1028),null,null);e.exports=l.exports},1026:function(e,t,a){a(1029);var l=a(377)(a(1018),a(1027),null,null);e.exports=l.exports},1027:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form-item",{attrs:{label:e.myLabel,"label-width":e.myLabelWidth,prop:e.prop}},[a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:18}},[a("el-input",{attrs:{value:e.value,placeholder:"请输入URL或上传","label-width":"180px"},on:{input:function(t){e.updateUrl(t)}}})],1),e._v(" "),a("el-col",{attrs:{span:1}},[a("el-upload",{staticClass:"upload-demo",attrs:{"on-success":e.onSuccess,"show-file-list":!1,name:e.type,action:"/admin/api/tools/"+e.type+"_upload"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1)],1)],1)],1)},staticRenderFns:[]}},1028:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:e.closeTransition?"":"el-zoom-in-center"}},[a("span",{staticClass:"el-tag",class:[e.type?"el-tag--"+e.type:"",{"is-hit":e.hit}],style:{backgroundColor:e.color}},[e._t("default"),e._v(" "),e.closable?a("i",{staticClass:"el-tag__close el-icon-close",on:{click:e.handleClose}}):e._e()],2)])},staticRenderFns:[]}},1029:function(e,t,a){var l=a(1024);"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);a(378)("35bd6048",l,!0)},1112:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a(1026),s=(a.n(l),a(1025)),o=a.n(s);t.default={components:{ElTag:o.a},data:function(){return{url:"/api/tools/sts/task",docs:[],page:1,limit:10,total:0,dialogFormLabelWidth:"120px",currentRow:null,select_cate:"",select_word:"",del_list:[],is_search:!1,search_field:"",search_key:"",iEditor:"",bookName:"",form:{},isAdd:!0,isAdmin:!1,dialogVisible:!1,checkVisible:!1}},created:function(){var e=this.$route.query||{};this.isAdmin=e.isAdmin||!1,e.search_field&&(this.search_field=e.search_field||""),e.search_key&&(this.search_key=e.search_key||""),this.getData()},computed:{},filters:{getLocalDateStr:function(e){var t=function(e){for(var t=""+e;t.length<2;)t="0"+t;return t},a=new Date(e),l=a.getFullYear(),s=a.getMonth()+1,o=a.getDate(),i=a.getHours(),n=a.getMinutes();return l+"-"+t(s)+"-"+t(o)+" "+t(i)+":"+t(n)}},methods:{formatResultList:function(e){var t=[];return e.forEach(function(e){var a="<p>版本:"+e.version+"|来源版本:"+e.fromVersion+"|文件数目:"+e.wavList.length+"|时长:"+e.duration+"|编辑人:"+(e.editor||"<空>")+"</p>";t.push(a)}),t.join("")},handleSizeChange:function(e){this.limit=e,this.getData()},handleCurrentChange:function(e){this.page=e,this.getData()},getData:function(){var e=this,t={offset:(e.page-1)*e.limit,limit:e.limit,sort_field:"updateAt"};e.search_field&&(t.search_field=e.search_field),e.search_key&&(t.search_key=e.search_key),e.$axios.get(e.url,{params:t}).then(function(t){for(var a=t.data.data.docs||[],l=0;l<a.length;l++)a[l].wavList=a[l].wavList||[],a[l].result=a[l].result||[],a[l].wavCount=a[l].wavList.length,a[l].versionCount=a[l].result.length,a[l].isWavMarked=a[l].versionCount>0,a[l].isWavOnlyUploaded=a[l].wavCount>0&&!a[l].isWavMarked;e.docs=a,e.total=t.data.data.total||0})},delData:function(e){var t=this;t.$axios.post(t.url+"/"+e+"?_op=del").then(function(e){t.getData()})},onDelete:function(e,t){var a=this;this.$confirm("确认删除文档 ["+t.docId+"] 吗？一旦删除不可恢复！！！").then(function(e){a.delData(t._id)}).catch(function(e){})},onSearch:function(){return this.search_field?this.search_key?void this.getData():this.$message.error("未填写搜索词"):this.$message.error("未指定搜索字段")},onClear:function(){this.search_field="",this.search_key="",this.page=1,this.getData()},onAdd:function(){this.$router.push({path:"/sts_new"})},onEdit:function(e,t){var a=t.result[t.result.length-1].version;this.$router.push({path:"/sts_new?id="+t._id+"&version="+a+"&taskId="+encodeURIComponent(t.taskId)+"&search_field="+encodeURIComponent(this.search_field)+"&search_key="+encodeURIComponent(this.search_key)})},onMark:function(e,t){this.$router.push({path:"/sts_new?id="+t._id+"&isMarkNew=1&taskId="+encodeURIComponent(t.taskId)+"&search_field="+encodeURIComponent(this.search_field)+"&search_key="+encodeURIComponent(this.search_key)})},showComfirm:function(){this.comfirmVisible=!0},cancleDialog:function(){this.dialogVisible=!1,this.$refs.form.resetFields()}}}},1123:function(e,t,a){t=e.exports=a(164)(!1),t.push([e.i,".el-alert{padding-top:0;padding-bottom:0}.entry-detail .el-form-item{margin-bottom:0}.entry-detail .el-form-item .el-form-item__label{font-weight:700}.handle-box{margin-bottom:20px}.handle-select{width:120px}.handle-input{width:300px;display:inline-block}.pedia .text-input{width:33%;margin-bottom:10px}.pedia .line-input{width:99.8%;margin-bottom:10px}.pedia .block{display:block;margin-bottom:10px}.pedia .block i{margin-right:8px}.pedia .del-button{border:none;color:#97a8be;padding:5px}.pedia .del-button:hover{color:#20a0ff}",""])},1177:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-menu"}),e._v(" 服务管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("语音标注列表")])],1)],1),e._v(" "),a("div",{staticClass:"handle-box"},[a("el-button",{staticClass:"handle-add mr10",attrs:{type:"success",icon:"plus"},on:{click:e.onAdd}},[e._v("添加")]),e._v(" "),a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"搜索字段"},model:{value:e.search_field,callback:function(t){e.search_field=t},expression:"search_field"}},[a("el-option",{key:"2",attrs:{label:"用户ID",value:"userId"}}),e._v(" "),a("el-option",{key:"3",attrs:{label:"文档ID",value:"docId"}})],1),e._v(" "),a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"搜索关键词"},model:{value:e.search_key,callback:function(t){e.search_key=t},expression:"search_key"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.onSearch}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"circle-close"},on:{click:e.onClear}},[e._v("重置")])],1),e._v(" "),a("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:e.docs,border:""},on:{"current-change":function(e){}}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"entry-detail",attrs:{"label-position":"left"}},[a("el-form-item",{attrs:{label:"更新时间"}},[a("span",[e._v(e._s(e._f("getLocalDateStr")(t.row.updateAt)))])]),e._v(" "),a("el-form-item",{attrs:{label:"taskId"}},[a("span",[e._v(e._s(t.row.taskId))])]),e._v(" "),a("el-form-item",{attrs:{label:"原始文本"}},[a("span",[e._v(e._s(t.row.originText))])]),e._v(" "),a("el-form-item",{attrs:{label:"原始存放路径"}},[a("span",[e._v(e._s(t.row.uploadDir))])]),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("span",[e._v(e._s(t.row.remark))])]),e._v(" "),a("el-form-item",{attrs:{label:"版本信息"}},[a("div",{domProps:{innerHTML:e._s(e.formatResultList(t.row.result))}})])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{type:"index",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userId",label:"用户ID",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"docId",label:"文档ID",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"duration",label:"原始时长(毫秒)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"wavCount",label:"总音频数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"versionCount",label:"版本数"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isWavOnlyUploaded?a("el-button",{attrs:{size:"small"},on:{click:function(a){e.onMark(t.$index,t.row)}}},[e._v("去标注")]):e._e(),e._v(" "),t.row.isWavMarked?a("el-button",{attrs:{size:"small"},on:{click:function(a){e.onEdit(t.$index,t.row)}}},[e._v("去审查")]):e._e(),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isAdmin,expression:"isAdmin"}],attrs:{size:"small",type:"danger"},on:{click:function(a){e.onDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,30,50,100,1e3],"page-size":e.limit,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]}},1204:function(e,t,a){var l=a(1123);"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);a(378)("49f9ddda",l,!0)}});