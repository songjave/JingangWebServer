webpackJsonp([24],{1103:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default={components:{},data:function(){return{webUrl:"",loadDisplay:!1,webTaging:!1,imgArr:[],addImgArr:[],url:"/api/func/pic_target",resultUrl:"/api/func/pic_target",inputUrl:"/api/func/pic_target_webUrl"}},created:function(){},computed:{},methods:{uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var a=16*Math.random()|0;return("x"===t?a:3&a|8).toString(16)})},onCloseImg:function(t){this.imgArr[t].img="",this.imgArr[t].imgTag="",this.imgArr.splice(t,1)},onWebSubmit:function(){var t=this.webUrl.lastIndexOf("."),a=this.webUrl.substr(t+1);if(!/^[hH][tT][tT][pP]([sS]?):\/\/(\S+\.)+\S{2,}$/.test(this.webUrl)||!/jpg/g.test(a))return this.$message.error("图片地址格式错误");this.webTaging=!0,this.loadDisplay=!0,this.loadText="文件提交中...",this.addImgArr=[{img:"",imgTag:"",des:""}],console.log(this.webUrl);var e=new FormData;e.append("id",this.uuid()),e.append("url",this.webUrl),this.postImg(this.inputUrl,e)},onWatchDataReady:function(t){var a=this,e=setInterval(function(){a.$axios.get(a.resultUrl+"/"+t).then(function(t){var i=t.data;return i.errCode?(clearInterval(e),a.loadText="",a.loadDisplay=!1,a.$message.error("数据处理失败")):i.data.summary?(clearInterval(e),a.loadText="",a.loadDisplay=!1,a.webUrl="",a.addImgArr.forEach(function(t,a){i.data.images[a]&&(t.imgTag=i.data.dir+i.data.images[a]),!i.data.images[a]&&(t.imgTag=t.img),i.data.summary&&(t.des="图像显示了"+i.data.summary),!i.data.summary&&(t.des="图像所含元素类别未知")}),a.imgArr=a.addImgArr.concat(a.imgArr),a.$message.success("处理成功")):void 0})},2e3)},readPhoto:function(t){var a=this,e=new FileReader;e.onload=function(i){a.addImgArr[t].img=e.result},event.target.files[t]&&e.readAsDataURL(event.target.files[t])},postImg:function(t,a){var e=this;this.$axios.post(t,a).then(function(t){var a=t.data;return a.errCode?(e.loadDisplay=!1,e.loadText="",-4===a.errCode?e.$message.error("输入地址中无可下载的图片"):e.$message.error("处理异常: "+(t.data.errMsg||t.data.errCode))):(e.onWatchDataReady(a.data.id),e.loadText="信息提取中...")})},uploadImg:function(t){this.loadDisplay=!0,this.loadText="文件提交中...";var a=new FormData;a.append("id",this.uuid());for(var e in event.target.files){if("length"===e)break;this.addImgArr.push({img:"",imgTag:"",des:""}),this.readPhoto(e),a.append("file",event.target.files[e])}this.postImg(this.url,a)},onInputImg:function(t){this.webTaging=!1,this.addImgArr=[],this.uploadImg(t.target.files)},clickImgBtn:function(){var t=document.getElementById("img-input");t&&t.value&&(t.value=""),document.getElementById("img-input").click()}}}},1134:function(t,a,e){a=t.exports=e(164)(!1),a.push([t.i,'[data-v-63879b1d]::-webkit-input-placeholder{color:#97a8be}.pt-img-box[data-v-63879b1d]{position:relative;max-height:300px;width:auto;margin:0 5px 10px 0;left:50%;transform:translate(-50%)}.pt-img-container[data-v-63879b1d]{position:relative;width:fit-content;display:inline-block;margin:10px 10px 0 0;padding:10px 5px 5px 10px;box-shadow:0 1px 3px rgba(0,0,0,.39)}.pt-img-fork[data-v-63879b1d]{position:absolute;z-index:1;color:#b0aeae;right:14px;top:14px;display:none;cursor:pointer}.pt-img-container:hover .pt-img-fork[data-v-63879b1d]{display:block}#pt-img-input[data-v-63879b1d]{width:45%;margin-bottom:10px;margin-right:10px;transform:translateY(2px)}.pt-tag[data-v-63879b1d]{display:block;width:fit-content;margin-bottom:10px;padding:0 15px;color:#777474;font-size:14px;font-weight:600}.loader[data-v-63879b1d]{position:absolute;width:250px;height:50px;line-height:50px;text-align:center;top:50%;left:50%;transform:translate(-50%,-50%);font-family:helvetica,arial,sans-serif;text-transform:uppercase;font-weight:900;color:#20a0ff;letter-spacing:.2em;z-index:10}.loader[data-v-63879b1d]:after,.loader[data-v-63879b1d]:before{content:"";display:block;width:15px;height:15px;background:#20a0ff;position:absolute;animation:load .7s infinite alternate ease-in-out}.loader[data-v-63879b1d]:before{top:0}.loader[data-v-63879b1d]:after{bottom:0}@keyframes load{0%{left:0;height:30px;width:15px}50%{height:8px;width:40px}to{left:235px;height:30px;width:15px}}',""])},1187:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"table"},[e("div",{staticClass:"crumbs"},[e("el-breadcrumb",{attrs:{separator:"/"}},[e("el-breadcrumb-item",[e("i",{staticClass:"el-icon-menu"}),t._v(" 功能")]),t._v(" "),e("el-breadcrumb-item",[t._v("图像信息提取")])],1)],1),t._v(" "),e("el-form",[e("el-form-item",{attrs:{label:"本地图像："}},[e("input",{staticStyle:{display:"none"},attrs:{type:"file",accept:"image/jpg",id:"img-input"},on:{change:t.onInputImg}}),t._v(" "),e("el-button",{attrs:{type:"success"},on:{click:t.clickImgBtn}},[t._v("选择文件并提取")])],1),t._v(" "),e("el-form-item",{attrs:{label:"网络图像："}},[e("el-input",{attrs:{placeholder:"输入网络图片地址，仅支持jpg格式图像",id:"pt-img-input"},model:{value:t.webUrl,callback:function(a){t.webUrl=a},expression:"webUrl"}}),t._v(" "),e("el-button",{attrs:{type:"success"},on:{click:t.onWebSubmit}},[t._v("点击提取")])],1)],1),t._v(" "),t.loadDisplay?e("div",{staticClass:"loader"},[t._v("处理中...")]):t._e(),t._v(" "),t._l(t.imgArr,function(a,i){return a?e("div",{staticClass:"pt-img-container"},[e("i",{staticClass:"el-icon-circle-close pt-img-fork",on:{click:function(a){t.onCloseImg(i)}}}),t._v(" "),e("img",{staticClass:"pt-img-box",attrs:{src:a.imgTag}}),t._v(" "),e("div",{staticClass:"pt-tag"},[e("span",[t._v(t._s(a.des))])])]):t._e()})],2)},staticRenderFns:[]}},1215:function(t,a,e){var i=e(1134);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);e(378)("23e2a2ee",i,!0)},998:function(t,a,e){e(1215);var i=e(377)(e(1103),e(1187),"data-v-63879b1d",null);t.exports=i.exports}});